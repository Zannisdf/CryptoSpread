<div id="<%= @coin.id %>">
  <h1>
    <% if can? :create, Portfolio %>
      <% if followed?(@coin) %>
        <%= link_to coin_portfolios_path(@coin), class: 'btn btn-warning btn-sm follow', data: { remote:true, method: :post } do %>
          <i class='fas fa-minus'></i>
        <% end %>
      <% else %>
        <%= link_to coin_portfolios_path(@coin), class: 'btn btn-outline-warning btn-sm follow', data: { remote:true, method: :post } do %>
          <i class="fas fa-plus"></i>
        <% end %>
      <% end %>
    <% end %>
    <%= @coin.name %>
  </h1>
  <p>
    <%= @coin.description %>
  </p>
</div>

<%= line_chart @coin.daily_price, min: nil, curve: false %>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Market</th>
      <th>Current Price</th>
    </tr>
  </thead>
  <tbody>
    <% @markets.each do |market| %>
      <tr>
        <td><%= link_to market.name, market.url %></td>
        <td><%= market_price(@coin, market) %></td>
      </tr>
    <% end %>
  </tbody>

</table>

<%= render 'shared/comments_form', {coin: @coin, comment: @comment} %>

<h3 class="mt-3">Comments:</h3>
<div class="comments-container mt-2">
  <%= render @comments %>
</div>